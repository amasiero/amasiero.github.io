<link id="mm-light" rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
<link id="mm-dark"  rel="stylesheet" href="{{ '/assets/css/dark.css'  | relative_url }}" disabled>

<script>
  (function() {
    var light = document.getElementById('mm-light');
    var dark  = document.getElementById('mm-dark');
    if (!light || !dark) return;

    // persisted: 'light' | 'dark' | null (system default = light here)
    var pref = localStorage.getItem('theme');

    function apply(t) {
      if (t === 'dark') { dark.disabled = false; light.disabled = true; }
      else              { dark.disabled = true;  light.disabled = false; }
    }

    if (pref === 'dark') apply('dark');
    else if (pref === 'light') apply('light');
    // else keep default (light). If you want system default, see note below.
    window.__applyTheme = apply; // expose for footer toggle
  })();
</script>
